<div metal:use-macro="load: ../shared/_layout.pt">
    <div metal:fill-slot="content" tal:omit-tag="True">
        <div class="content">

            <div class="section">
                <form action="" method="POST" class="form" onsubmit="return validateRegistrationForm()">
                    <h1>Edit you pofile</h1>

                    <figure class="image is-96x96 mt-3">
                        <img src="${user.profile_pic_path}" class="is-rounded" alt="user-icon">
                    </figure>


                    <div class="field">
                        <label class="label">Nickname</label>
                        <div class="control has-icons-left has-icons-right">
                            <input class="input" type="text" name="nickname" type="text" placeholder=" Your nickname"
                                   value="${ user.nickname }">
                            <span class="icon is-small is-left">
                      <ion-icon name="person"></ion-icon>
                    </span>
                        </div>
                    </div>

                    <div class="field">
                        <label class="label">Motto</label>
                        <div class="control has-icons-left has-icons-right">
                            <input class="input" type="text" name="motto" type="text" placeholder=" Your moto"
                                   value="${ user.motto }">
                            <span class="icon is-small is-left">
                        <ion-icon name="person"></ion-icon>
                    </span>
                        </div>
                    </div>


                    <div class="field">
                        <label class="label">E-mail</label>
                        <div class="control has-icons-left has-icons-right">
                            <input class="input" type="text" name="email" placeholder=" Your email address"
                                   value="${ user.email }" id="email-input">
                            <span class="icon is-small is-left">
                      <ion-icon name="mail"></ion-icon>
                    </span>
                            <span class="icon is-small is-right is-hidden">
                      <ion-icon name="checkmark" id="email-input-status-icon"></ion-icon>
                    </span>
                            <p class="help is-danger is-hidden" id="email-input-status-warning-text">Email must be
                                valid</p>
                        </div>
                    </div>

                    <button type="submit" class="button is-primary">Submit changes</button>
                    <h5 class="help is-danger" tal:condition="error">${ error }</h5>
                </form>

                <br>
                <br>
                <form method="post" enctype="multipart/form-data" runat="server">
                    <div class="file has-name is-fullwidth is-primary">
                        <label class="file-label">
                            <input class="file-input" type="file" accept=".jpg,.jpeg,.png" name="user-image"
                                   onchange="loadFile(event)">
                            <span class="file-cta">
  <span class="file-icon">
    <ion-icon name="cloud-upload-outline"></ion-icon>
  </span>
  <span class="file-label">
    Choose a fileâ€¦
  </span>
</span>
                        </label>
                    </div>
                    <input class="button" type="submit" value="Upload image">
                </form>

                <img class="image" id="output"/>

            </div>
        </div>


    </div>
</div>

<script>
    var loadFile = function (event) {
        var output = document.getElementById('output');
        output.src = URL.createObjectURL(event.target.files[0]);
        output.onload = function () {
            URL.revokeObjectURL(output.src) // free memory
        }
    };
</script>
